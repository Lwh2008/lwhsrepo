name: CI
on: [push]
jobs: 
  package:
    runs-on: ubuntu-latest
    container: fedora
    steps: 
    - name: package
      run: |
        dnf makecache
        dnf -y up
        sudo dnf in -y qt5-qtbase-devel qt5-qtwebsockets-devel qt5-qtbase-private-devel glib2-devel ostree-devel yaml-cpp-devel systemd-devel libseccomp-devel docopt-cpp-devel python3-docopt elfutils-libelf-devel git
        ln -s /usr/lib64/libdocopt.so /usr/lib64/libdocopt.a
    - name: clone src
      run: |   
        git clone https://github.com/linuxdeepin/linglong.git --tag 1.5.5
    - name: build src
      run: |
        cd 1.5.5
        mkdir build
        cd build
        cmake ..
        make -j$(nproc)
        make install
    - name: info
      run: fastfetch